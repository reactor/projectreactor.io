<!--
  ~ Copyright (c) 2018-2022 VMware Inc. or its affiliates, All Rights Reserved.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~   https://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->
<!DOCTYPE html>
<html th:replace="~{layout :: layout('support', ~{::title}, ~{::meta[@name='description']}, ~{}, ~{::body})}" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Project Reactor - Support</title>
    <meta name="description" content="Project Reactor Support Timelines"/>
</head>
<body>

<div class="content" id="content">
    <div class="page-summary">
        <div class="page-summary-content">
            <div class="page-summary-wrap">
                <h1>Project Reactor Support Timeline</h1>

                <div class="details">
                                    <span>This the listing of support dates for Project Reactor libraries.</span>
                </div>
            </div>
        </div>
    </div>
    <div class="support">
        <div class="project">
            <div class="project-row">
                <div class="project-col-left">
                    <div class="suptable">
                        <section id="supportTable">
                            <table>
                                <thead align="left" bgcolor="#dedede">
                                    <tr>
                                    <th>Version</th>
                                    <th>Initial Release</th>
                                    <th>End of OSS Support</th>
                                    <th>End of Enterprise Support</th>
                                    <th>Date Published in BOM</th>
                                    </tr>
                                    <tr bgcolor="#f1f1f1">
                                        <td>&nbsp;</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                </thead>
                                <tbody id="supportTableBody">
                                    <!-- Support data will be loaded here dynamically -->
                                    <tr>
                                        <td colspan="5" style="text-align: center; padding: 20px;">
                                            Loading support data...
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </section>
                    </div>
                    <div class="enterprise-support">
                        <table>
                            <tbody>
                                <tr>
                                    <td>
                                        <h3>OSS Support</h3>
                                        <p>Includes support from the Reactor community for the OSS support timeline.<br/>See our <a href="https://spring.io/support-policy">OSS support policy</a> for more details.
                                        </p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <h3>Enterprise Support</h3>
                                        <p>Includes dedicated support from Reactor experts, covering OSS and extended Enterprise support timelines to ensure long-term reliability.<br/>See <a href="https://enterprise.spring.io" rel="nofollow">Tanzu Spring</a> to learrn more about enterprise support.</p>
                                    </td>
                                </tr>
                                </tbody>
                        </table>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Load support data from JSON file
async function loadSupportData() {
    try {
        const response = await fetch('/support.json');
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        const data = await response.json();
        
        // Populate the support table
        populateSupportTable(data);
        
        
    } catch (error) {
        console.error('Error loading support data:', error);
        document.getElementById('supportTableBody').innerHTML = 
            '<tr><td colspan="5" style="text-align: center; padding: 20px; color: red;">Error loading support data. Please try again later.</td></tr>';
    }
}

function populateSupportTable(data) {
    const tbody = document.getElementById('supportTableBody');
    tbody.innerHTML = '';
    
    data.libraries.forEach(library => {
        // Add library header row
        const headerRow = document.createElement('tr');
        headerRow.setAttribute('bgcolor', '#dedede');
        headerRow.innerHTML = `
            <td><p dir="auto"><strong>${library.displayName}</strong></p></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        `;
        tbody.appendChild(headerRow);
        
        // Add version rows
        library.versions.forEach(version => {
            const versionRow = document.createElement('tr');
            versionRow.innerHTML = `
                <td><p dir="auto">${version.version}</p></td>
                <td><p dir="auto">${version.initialRelease}</p></td>
                <td><p dir="auto">${version.endOfOssSupport}</p></td>
                <td><p dir="auto">${version.endOfEnterpriseSupport}</p></td>
                <td><p dir="auto">${version.datePublishedInBom}</p></td>
            `;
            tbody.appendChild(versionRow);
        });
    });
}

// Load data when the page loads
document.addEventListener('DOMContentLoaded', loadSupportData);
</script>

</body>
</html>
